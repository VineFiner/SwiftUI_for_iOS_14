- [孟] 大家好，欢迎回到第八节 我的SwiftUI课程 因此，我们可以用iOS 14的大型动画工具 称为匹配几何效果。 这将使我们能够对共享元素进行动画处理 在两个视图之间无缝连接。 要做到这一点， 您将需要设置 匹配的几何效果修改器， 我们将标记共享元素。 在这种情况下， 我们有CourseItem， 在全屏模式下完全相同。 对于第一个CourseItem， 你把在框架前匹配的几何效果修改器 放进去很重要 。 所以点matchedGeometryEffect，回车。 在这里，我们需要输入一个ID，然后输入一个NameSpace。 对于ID，我们只需要放入一张卡即可。 对于命名空间， 我们将不得不声明Namespace var名称空间。 因此，据我了解，命名空间是您设置 匹配元素的集合的位置。 因此，让我们将命名空间放在修饰符中。 然后我们可以复制此修饰符 并以全屏模式将其放在第二个CourseItem上。 让我们继续。 点击卡片。 您会看到只有过渡工作正常。 所以要解决这个问题 我们将设置另一个名为isSource的属性。 在这里，我们想知道哪张卡是原始的。 因此，您可以通过option单击来查看文档 而且您得到更多解释 发生了什么。 所以我们有isSource 我们要在这里做什么 是使用show状态。 所以显示。 然后我们希望这是真。 因此，我们将在前面添加感叹号。 现在，当您单击它时， 它完成了美丽的过渡。 我们在过渡过程中只有一个问题。 因此，我们可以改为从移动到默认不透明度。 瞧，现在我们有了一个完美的过渡。 因此，据我了解，show是错误的。 因此，我们使用感叹号来实现它。 但是同时 这必须是状态，因为在全屏模式下， 该第一张卡不再是来源。 因此，这变为错误。 全屏显示卡成为源， 这意味着现在我们可以来回切换， 它过渡完美。 因此，此动画非常可定制。 例如 对于全屏模式下的课程项目， 我们要在匹配的几何效果之后设置点帧 括号高度为300。 当我这样做时 它不会占据整个高度。 有趣的是 是我可以设置想要的任何类型的内容 在我的全屏模式下 匹配的几何体将负责 在两个CourseItem视图之间过渡。 例如 我可以使全屏滚动。 因此，命令单击CourseItem， 让我们将其放入Vstack 然后从VStack更改为滚动视图。 所以当你这样做时 您可以看到我正在过渡， 现在我可以滚动内容了。 只要确保edgeIgnoringSafeArea 放置在滚动视图上。 与过渡相同。 所以过渡只会 在if show语句内的第一个父容器上起作用。 让我们在封面后面添加更多内容， 所以是CourseItem。 我们将在CourseRow括号中加上 现在就在这里。 您可以看到CourseRow正在使用 不透明过渡 而CourseItem使用匹配的几何效果。 为了使内容可滚动，我们将设置此重复。 因此，命令单击，单击重复。 不是最多五个 我们将设置为20。 现在我们的内容是可滚动的，这真的很棒。 以及为什么不添加一些填充。 因此，请为每个命令单击 将其放入VStack中 在VStack之后，设置点填充括号， 太棒了 因此，它开始看起来像一个真正的UI。 动画是可取消的，内容是可滚动的。 现在回到动画与withAnimation的话题。 因此，如果我通过加修饰禁用withAnimation 然后放回动画修改器， 您会看到动画要慢得多， 但至少可以播放。 它不会立即显示过渡。 但是为什么我说withAnimation更好 是因为有滞后。 所以您可以看到当我滚动时 后面的卡正试图赶上。 因此，这并不理想。 在使用行进几何效果时， 我相信现在 最好使用withAnimation。 因此，我可以删除点动画修改器。 我知道现在看起来真的很容易 是的，它将变得更加有趣， 特别是当您处理很多卡时 必须匹配不同的元素。 在进行下一次课程之前， 我们可以删除这个VStack容器 因为我们不再遇到困难。 因此，请确保双击花括号 而且您知道可以在哪里删除它。 所以，我要先删除结尾 然后开始。 让我通过选择整个内容来修复缩进 控制。 在下一次课程中 我想向您展示如何创建延迟过渡 这样我们首先显示卡片 然后内容显示第二。 因此，我们下届会议将再见。