WEBVTT

1
00:00:12.640 --> 00:00:14.970
- [孟] 大家好，歡迎回到第八節

2
00:00:14.970 --> 00:00:16.850
我的SwiftUI課程

3
00:00:16.850 --> 00:00:21.810
因此，我們可以用iOS 14的大型動畫工具

4
00:00:21.810 --> 00:00:23.770
稱為匹配幾何效果。

5
00:00:23.770 --> 00:00:26.740
這將使我們能夠對共用元素進行動畫處理

6
00:00:26.740 --> 00:00:29.580
在兩個視圖之間無縫連接。

7
00:00:29.580 --> 00:00:30.413
要做到這一點，

8
00:00:30.413 --> 00:00:31.780
您將需要設置

9
00:00:31.780 --> 00:00:34.890
匹配的幾何效果修改器，

10
00:00:34.890 --> 00:00:37.250
我們將標記共用元素。

11
00:00:37.250 --> 00:00:38.520
在這種情況下，

12
00:00:38.520 --> 00:00:39.930
我們有CourseItem，

13
00:00:39.930 --> 00:00:43.340
在全屏模式下完全相同。

14
00:00:43.340 --> 00:00:45.180
對於第一個CourseItem，

15
00:00:45.180 --> 00:00:47.360
你把在框架前匹配的幾何效果修改器

16
00:00:47.360 --> 00:00:50.840
放進去很重要 。

17
00:00:50.840 --> 00:00:55.300
所以點matchedGeometryEffect，回車。

18
00:00:55.300 --> 00:00:59.300
在這里，我們需要輸入一個ID，然後輸入一個NameSpace。

19
00:00:59.300 --> 00:01:02.570
對於ID，我們只需要放入一張卡即可。

20
00:01:02.570 --> 00:01:04.710
對於命名空間，

21
00:01:04.710 --> 00:01:09.710
我們將不得不聲明Namespace var名稱空間。

22
00:01:11.780 --> 00:01:14.470
因此，據我瞭解，命名空間是您設置

23
00:01:14.470 --> 00:01:17.110
匹配元素的集合的位置。

24
00:01:17.110 --> 00:01:21.010
因此，讓我們將命名空間放在修飾符中。

25
00:01:21.010 --> 00:01:24.440
然後我們可以復制此修飾符

26
00:01:24.440 --> 00:01:28.943
並以全屏模式將其放在第二個CourseItem上。

27
00:01:29.820 --> 00:01:31.203
讓我們繼續。

28
00:01:32.270 --> 00:01:33.700
點擊卡片。

29
00:01:33.700 --> 00:01:37.200
您會看到只有過渡工作正常。

30
00:01:37.200 --> 00:01:38.823
所以要解決這個問題

31
00:01:39.730 --> 00:01:43.113
我們將設置另一個名為isSource的屬性。

32
00:01:44.000 --> 00:01:47.000
在這里，我們想知道哪張卡是原始的。

33
00:01:47.000 --> 00:01:51.300
因此，您可以通過option單擊來查看文檔

34
00:01:51.300 --> 00:01:53.560
而且您得到更多解釋

35
00:01:53.560 --> 00:01:54.900
發生了什麼。

36
00:01:54.900 --> 00:01:56.860
所以我們有isSource

37
00:01:56.860 --> 00:01:59.480
我們要在這里做什麼

38
00:01:59.480 --> 00:02:01.473
是使用show狀態。

39
00:02:02.500 --> 00:02:04.210
所以顯示。

40
00:02:04.210 --> 00:02:06.460
然後我們希望這是真。

41
00:02:06.460 --> 00:02:11.140
因此，我們將在前面添加感嘆號。

42
00:02:11.140 --> 00:02:12.530
現在，當您單擊它時，

43
00:02:12.530 --> 00:02:15.090
它完成了美麗的過渡。

44
00:02:15.090 --> 00:02:19.370
我們在過渡過程中只有一個問題。

45
00:02:19.370 --> 00:02:24.370
因此，我們可以改為從移動到默認不透明度。

46
00:02:25.470 --> 00:02:29.190
瞧，現在我們有了一個完美的過渡。

47
00:02:29.190 --> 00:02:32.080
因此，據我瞭解，show是錯誤的。

48
00:02:32.080 --> 00:02:35.260
因此，我們使用感嘆號來實現它。

49
00:02:35.260 --> 00:02:36.140
但是同時

50
00:02:36.140 --> 00:02:39.440
這必須是狀態，因為在全屏模式下，

51
00:02:39.440 --> 00:02:42.890
該第一張卡不再是來源。

52
00:02:42.890 --> 00:02:45.440
因此，這變為錯誤。

53
00:02:45.440 --> 00:02:47.900
全屏顯示卡成為源，

54
00:02:47.900 --> 00:02:50.930
這意味著現在我們可以來回切換，

55
00:02:50.930 --> 00:02:53.160
它過渡完美。

56
00:02:53.160 --> 00:02:56.270
因此，此動畫非常可定製。

57
00:02:56.270 --> 00:02:57.103
例如

58
00:02:57.103 --> 00:02:59.740
對於全屏模式下的課程項目，

59
00:02:59.740 --> 00:03:04.470
我們要在匹配的幾何效果之後設置點幀

60
00:03:04.470 --> 00:03:08.760
括號高度為300。

61
00:03:08.760 --> 00:03:09.960
當我這樣做時

62
00:03:09.960 --> 00:03:12.560
它不會占據整個高度。

63
00:03:12.560 --> 00:03:13.810
有趣的是

64
00:03:13.810 --> 00:03:17.030
是我可以設置想要的任何類型的內容

65
00:03:17.030 --> 00:03:18.780
在我的全屏模式下

66
00:03:18.780 --> 00:03:22.070
匹配的幾何體將負責

67
00:03:22.070 --> 00:03:24.560
在兩個CourseItem視圖之間過渡。

68
00:03:24.560 --> 00:03:25.700
例如

69
00:03:25.700 --> 00:03:28.260
我可以使全屏滾動。

70
00:03:28.260 --> 00:03:30.620
因此，命令單擊CourseItem，

71
00:03:30.620 --> 00:03:32.650
讓我們將其放入Vstack

72
00:03:32.650 --> 00:03:35.653
然後從VStack更改為滾動視圖。

73
00:03:36.670 --> 00:03:37.920
所以當你這樣做時

74
00:03:37.920 --> 00:03:40.000
您可以看到我正在過渡，

75
00:03:40.000 --> 00:03:42.570
現在我可以滾動內容了。

76
00:03:42.570 --> 00:03:46.670
只要確保edgeIgnoringSafeArea

77
00:03:46.670 --> 00:03:49.530
放置在滾動視圖上。

78
00:03:49.530 --> 00:03:51.960
與過渡相同。

79
00:03:51.960 --> 00:03:53.890
所以過渡只會

80
00:03:53.890 --> 00:03:58.130
在if show語句內的第一個父容器上起作用。

81
00:03:58.130 --> 00:04:01.690
讓我們在封面後面添加更多內容，

82
00:04:01.690 --> 00:04:03.090
所以是CourseItem。

83
00:04:03.090 --> 00:04:06.383
我們將在CourseRow括號中加上

84
00:04:07.270 --> 00:04:08.840
現在就在這里。

85
00:04:08.840 --> 00:04:11.400
您可以看到CourseRow正在使用

86
00:04:11.400 --> 00:04:13.230
不透明過渡

87
00:04:13.230 --> 00:04:16.810
而CourseItem使用匹配的幾何效果。

88
00:04:16.810 --> 00:04:20.810
為了使內容可滾動，我們將設置此重復。

89
00:04:20.810 --> 00:04:23.760
因此，命令單擊，單擊重復。

90
00:04:23.760 --> 00:04:25.910
不是最多五個

91
00:04:25.910 --> 00:04:28.110
我們將設置為20。

92
00:04:28.110 --> 00:04:31.760
現在我們的內容是可滾動的，這真的很棒。

93
00:04:31.760 --> 00:04:33.860
以及為什麼不添加一些填充。

94
00:04:33.860 --> 00:04:36.200
因此，請為每個命令單擊

95
00:04:36.200 --> 00:04:38.020
將其放入VStack中

96
00:04:38.020 --> 00:04:42.030
在VStack之後，設置點填充括號，

97
00:04:42.030 --> 00:04:42.900
太棒了

98
00:04:42.900 --> 00:04:44.850
因此，它開始看起來像一個真正的UI。

99
00:04:44.850 --> 00:04:48.173
動畫是可取消的，內容是可滾動的。

100
00:04:49.560 --> 00:04:54.560
現在回到動畫與withAnimation的話題。

101
00:04:54.620 --> 00:04:58.260
因此，如果我通過加修飾禁用withAnimation

102
00:04:59.250 --> 00:05:02.870
然後放回動畫修改器，

103
00:05:02.870 --> 00:05:06.290
您會看到動畫要慢得多，

104
00:05:06.290 --> 00:05:07.200
但至少可以播放。

105
00:05:07.200 --> 00:05:10.440
它不會立即顯示過渡。

106
00:05:10.440 --> 00:05:13.200
但是為什麼我說withAnimation更好

107
00:05:13.200 --> 00:05:15.610
是因為有滯後。

108
00:05:15.610 --> 00:05:17.930
所以您可以看到當我滾動時

109
00:05:17.930 --> 00:05:21.670
後面的卡正試圖趕上。

110
00:05:21.670 --> 00:05:23.910
因此，這並不理想。

111
00:05:23.910 --> 00:05:26.800
在使用行進幾何效果時，

112
00:05:26.800 --> 00:05:28.400
我相信現在

113
00:05:28.400 --> 00:05:30.720
最好使用withAnimation。

114
00:05:30.720 --> 00:05:34.610
因此，我可以刪除點動畫修改器。

115
00:05:34.610 --> 00:05:36.620
我知道現在看起來真的很容易

116
00:05:36.620 --> 00:05:38.980
是的，它將變得更加有趣，

117
00:05:38.980 --> 00:05:41.650
特別是當您處理很多卡時

118
00:05:41.650 --> 00:05:44.430
必須匹配不同的元素。

119
00:05:44.430 --> 00:05:46.130
在進行下一次課程之前，

120
00:05:46.130 --> 00:05:48.100
我們可以刪除這個VStack容器

121
00:05:48.100 --> 00:05:51.290
因為我們不再遇到困難。

122
00:05:51.290 --> 00:05:54.660
因此，請確保雙擊花括號

123
00:05:54.660 --> 00:05:57.170
而且您知道可以在哪裡刪除它。

124
00:05:57.170 --> 00:06:00.340
所以，我要先刪除結尾

125
00:06:00.340 --> 00:06:01.883
然後開始。

126
00:06:02.730 --> 00:06:06.900
讓我通過選擇整個內容來修復縮進

127
00:06:06.900 --> 00:06:09.480
控制。

128
00:06:09.480 --> 00:06:10.460
在下一次課程中

129
00:06:10.460 --> 00:06:13.830
我想向您展示如何創建延遲過渡

130
00:06:13.830 --> 00:06:16.700
這樣我們首先顯示卡片

131
00:06:16.700 --> 00:06:18.990
然後內容顯示第二。

132
00:06:18.990 --> 00:06:20.863
因此，我們下屆會議將再見。

