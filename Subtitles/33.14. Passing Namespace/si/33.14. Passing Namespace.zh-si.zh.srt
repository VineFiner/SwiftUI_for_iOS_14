1
00:00:12,610 --> 00:00:16,600
- [孟] 嗨，欢迎来到我的SwiftUI课程的第14节。

2
00:00:16,600 --> 00:00:18,910
今天，我们将学习如何在视图之间传递名称空间

3
00:00:18,910 --> 00:00:22,500
以便我们可以全屏显示

4
00:00:22,500 --> 00:00:26,570
像这样与CoursesView文件分开。

5
00:00:26,570 --> 00:00:29,240
将会更轻松地管理数据，

6
00:00:29,240 --> 00:00:32,560
我们可以独立地重用此视图。

7
00:00:32,560 --> 00:00:35,120
因此，首先，我们将创建一个新文件，

8
00:00:35,120 --> 00:00:38,890
所以按Command + N，选择SwiftUI视图。

9
00:00:38,890 --> 00:00:40,907
我们将其命名为CourseDetail，

10
00:00:42,130 --> 00:00:45,083
并且我们将针对iOS和macOS。

11
00:00:46,880 --> 00:00:49,130
现在，我们要做的第一件事就是回

12
00:00:49,130 --> 00:00:51,770
到CoursesView并向下滚动一点

13
00:00:51,770 --> 00:00:54,860
查找可以作为一个孤立的视图

14
00:00:54,860 --> 00:00:56,800
重复使用的部分。

15
00:00:56,800 --> 00:01:00,080
因此，在这里，我们可以看到全屏卡片，

16
00:01:00,080 --> 00:01:01,800
然后我们有了内容，

17
00:01:01,800 --> 00:01:03,320
我们有滚动视图，

18
00:01:03,320 --> 00:01:07,030
然后我们有带有背景的容器。

19
00:01:07,030 --> 00:01:10,640
因此，如果我们要孤立使用此视图，

20
00:01:10,640 --> 00:01:12,910
我们真的不需要关闭按钮，

21
00:01:12,910 --> 00:01:15,490
而且，您可以看到它已附加

22
00:01:15,490 --> 00:01:18,530
到TapGesture以及某些

23
00:01:18,530 --> 00:01:22,740
特定于此过渡的状态与动画

24
00:01:22,740 --> 00:01:25,290
但就布局本身而言，

25
00:01:25,290 --> 00:01:27,710
从容器和滚动视图开始，

26
00:01:27,710 --> 00:01:29,610
我们绝对可以重用它。

27
00:01:29,610 --> 00:01:32,500
因此，让我们剪切Command + X，

28
00:01:32,500 --> 00:01:36,760
并将其替换为CourseDetail 。

29
00:01:36,760 --> 00:01:39,050
那我要去CourseDetail

30
00:01:39,050 --> 00:01:42,880
然后用这段代码替换文本。

31
00:01:42,880 --> 00:01:45,570
现在，我们肯定会遇到很多问题

32
00:01:45,570 --> 00:01:47,940
因为我们缺少变量。

33
00:01:47,940 --> 00:01:51,630
因此，例如，selectedItem在这里不存在，

34
00:01:51,630 --> 00:01:53,870
命名空间相同。

35
00:01:53,870 --> 00:01:57,870
现在，我们需要做的是在CoursesView中

36
00:01:57,870 --> 00:02:02,150
将数据传递到名为CourseDetail的组件

37
00:02:02,150 --> 00:02:06,060
在课程以及名称空间方面

38
00:02:06,060 --> 00:02:07,800
回到CourseDetail，

39
00:02:07,800 --> 00:02:10,870
这是我们要设置这些变量的地方，

40
00:02:10,870 --> 00:02:15,273
从Course类型的var course开始，

41
00:02:16,300 --> 00:02:18,020
然后我们要设置默认值，

42
00:02:18,020 --> 00:02:21,080
如此轻松地调用课程数组，

43
00:02:21,080 --> 00:02:24,140
然后我们将第一项设置为0。

44
00:02:24,140 --> 00:02:26,550
接下来，我们将需要名称空间

45
00:02:26,550 --> 00:02:30,100
为了使我们的matchedGeometryEffect仍然起作用。

46
00:02:30,100 --> 00:02:31,840
因此，在Course结束后，

47
00:02:31,840 --> 00:02:36,840
我们将声明类型为Namespace.ID的var名称空间。

48
00:02:39,430 --> 00:02:41,040
现在，有了这两个变量，

49
00:02:41,040 --> 00:02:43,510
我们可以将它们设置在正确的位置。

50
00:02:43,510 --> 00:02:47,794
因此，例如，课程必将成为课程，

51
00:02:47,794 --> 00:02:52,650
matchGeometryEffect ID将为course.id，

52
00:02:52,650 --> 00:02:56,330
与第二个matchedGeometryEffect相同，

53
00:02:56,330 --> 00:03:00,210
我们将按课程

54
00:03:00,210 --> 00:03:02,630
没有感叹号替换所选项目。

55
00:03:02,630 --> 00:03:04,630
所以这似乎很好用，

56
00:03:04,630 --> 00:03:07,530
我们只是在这里缺少一些预览值

57
00:03:07,530 --> 00:03:10,410
这样我们才能使其在右侧运行。

58
00:03:10,410 --> 00:03:13,970
现在，由于该课程具有默认设置，

59
00:03:13,970 --> 00:03:16,810
您不必为预览指定它，

60
00:03:16,810 --> 00:03:20,320
但在命名空间中，我们将需要一个默认值。

61
00:03:20,320 --> 00:03:24,520
所以我们可以在这里为

62
00:03:24,520 --> 00:03:26,955
命名空间设置一个静态变量，所以让我们输入

63
00:03:26,955 --> 00:03:31,955
@Namespace静态var命名空间。

64
00:03:34,660 --> 00:03:36,450
然后，在括号内

65
00:03:36,450 --> 00:03:39,180
预览中的CourseDetail的

66
00:03:39,180 --> 00:03:42,643
我们将放置命名空间：命名空间。

67
00:03:45,140 --> 00:03:46,150
太棒了

68
00:03:46,150 --> 00:03:48,940
现在，我们只需要

69
00:03:48,940 --> 00:03:51,590
从CoursesView传递名称空间。

70
00:03:51,590 --> 00:03:53,870
所以在这里，对于CourseDetail，

71
00:03:53,870 --> 00:03:58,870
我们将传递命名空间：然后传递命名空间。

72
00:04:00,490 --> 00:04:04,160
对于CourseDetail，我们还应该通过课程，

73
00:04:04,160 --> 00:04:08,027
所以在命名空间之前，当然：

74
00:04:08,930 --> 00:04:11,440
然后我们将传递选定的项目，

75
00:04:11,440 --> 00:04:16,440
所以selectedItem！并且不要忘记逗号。

76
00:04:17,440 --> 00:04:20,003
现在，您可以继续

77
00:04:20,980 --> 00:04:24,273
一切都应该像以前一样工作。

78
00:04:27,270 --> 00:04:29,930
回到CourseDetail，

79
00:04:29,930 --> 00:04:32,240
预览也可以。

80
00:04:32,240 --> 00:04:34,000
如果你试用这个，你会看到

81
00:04:34,000 --> 00:04:36,370
滚动有效，

82
00:04:36,370 --> 00:04:39,900
这就像我们有一个孤立的视图。

83
00:04:39,900 --> 00:04:41,500
现在，当我们在这里时，

84
00:04:41,500 --> 00:04:45,170
我们应该为应用程序导入其余数据。

85
00:04:45,170 --> 00:04:47,480
让我们转到Project文件。

86
00:04:47,480 --> 00:04:50,350
我要打开模型。

87
00:04:50,350 --> 00:04:54,370
到目前为止，我们已经创建了Course.swift。

88
00:04:54,370 --> 00:04:56,700
现在，让我们带走其余数据

89
00:04:56,700 --> 00:04:59,730
这样我们就不必手动创建它们，

90
00:04:59,730 --> 00:05:03,210
这是非常重复的，所以我为您创建了它们。

91
00:05:03,210 --> 00:05:06,410
我要拖放这些文件

92
00:05:06,410 --> 00:05:08,393
到模型文件夹。

93
00:05:09,870 --> 00:05:11,710
确保选择了这些，

94
00:05:11,710 --> 00:05:15,180
因此，如果需要，复制项目，创建组，

95
00:05:15,180 --> 00:05:20,180
然后是iOS和macOS目标，然后完成。

96
00:05:20,210 --> 00:05:21,460
当你这样做的时候，你会看到

97
00:05:21,460 --> 00:05:24,260
我们有一堆新的数据模型文件，

98
00:05:24,260 --> 00:05:27,200
包括我们之前创建的那个。

99
00:05:27,200 --> 00:05:28,650
如果您看内容

100
00:05:28,650 --> 00:05:33,650
这些是带有大量示例数据的简单数据模型，

101
00:05:33,990 --> 00:05:38,270
下载，直播，教程等也是如此。

102
00:05:38,270 --> 00:05:39,830
所以现在我可以关闭这个

103
00:05:39,830 --> 00:05:42,520
然后返回CourseDetail。

104
00:05:42,520 --> 00:05:45,080
在CourseDetail中，我将继续，

105
00:05:45,080 --> 00:05:47,570
然后在ForEach循环中，

106
00:05:47,570 --> 00:05:48,880
我们将替换

107
00:05:48,880 --> 00:05:53,673
手动输入了20个课程的课程，

108
00:05:55,280 --> 00:05:58,460
然后我要自定义组件

109
00:05:58,460 --> 00:06:02,450
通过命令单击它，跳到"定义"。

110
00:06:02,450 --> 00:06:06,570
因此，我们要做的是替换这些图像，

111
00:06:06,570 --> 00:06:09,560
文字和颜色。

112
00:06:09,560 --> 00:06:14,440
因此，首先，我们将必须声明var item

113
00:06:14,440 --> 00:06:18,800
类型为CourseSection，我们将使用默认值

114
00:06:18,800 --> 00:06:23,800
使用courseSections，方括号，0。

115
00:06:24,800 --> 00:06:28,310
因此，如果您查看CourseSection的数据模型，

116
00:06:28,310 --> 00:06:32,150
您将看到这些是我们拥有的值，

117
00:06:32,150 --> 00:06:35,760
标题，副标题，徽标和颜色，

118
00:06:35,760 --> 00:06:38,070
这是样本数据。

119
00:06:38,070 --> 00:06:40,430
所以我们点击这个后退箭头

120
00:06:40,430 --> 00:06:42,160
转到上一个文件。

121
00:06:42,160 --> 00:06:44,530
除此之外，您可以随时打开该文件夹

122
00:06:44,530 --> 00:06:46,027
然后转到CourseRow，

123
00:06:47,520 --> 00:06:49,700
然后我们将继续。

124
00:06:49,700 --> 00:06:52,260
对于图片，我们将使用徽标，

125
00:06:52,260 --> 00:06:55,140
在这里，我们不会使用SF符号，

126
00:06:55,140 --> 00:06:58,110
这意味着我们将删除systemName。

127
00:06:58,110 --> 00:07:02,390
我们只是要放置item.logo。

128
00:07:02,390 --> 00:07:05,830
因此，现在，我们肯定存在渲染模式问题。

129
00:07:05,830 --> 00:07:09,060
目前，它使用的是.template临时文件。

130
00:07:09,060 --> 00:07:12,963
我们将使用原始颜色。

131
00:07:13,950 --> 00:07:15,660
对于背景视图，

132
00:07:15,660 --> 00:07:19,193
我们将用item.color替换它。

133
00:07:20,150 --> 00:07:23,803
圆很棒，我们可以删除前景色

134
00:07:23,803 --> 00:07:25,690
因为我们不再需要它了。

135
00:07:25,690 --> 00:07:28,130
接下来，让我们替换文本。

136
00:07:28,130 --> 00:07:30,330
所以，对于第一个文本，

137
00:07:30,330 --> 00:07:33,540
我们将使用item.title。

138
00:07:33,540 --> 00:07:38,330
对于第二个文本，让我们使用item.subtitle。

139
00:07:38,330 --> 00:07:42,560
太好了，现在，我们可以将这些数据放入CourseDetail中。

140
00:07:42,560 --> 00:07:45,690
所以，现在，我们有课程部分，

141
00:07:45,690 --> 00:07:47,530
我们有正确的数字，

142
00:07:47,530 --> 00:07:51,980
但是我们应该将数据传递给我的组件CourseRow。

143
00:07:51,980 --> 00:07:56,980
因此，item：item，这样，我们有了数据。

144
00:07:59,390 --> 00:08:02,830
让我们在这些行之间添加一个分隔符。

145
00:08:02,830 --> 00:08:05,660
让我们键入Divider，括号。

146
00:08:05,660 --> 00:08:08,330
太好了，我们现在有一个非常酷的UI。

147
00:08:08,330 --> 00:08:10,810
我们可以回到课程视图，

148
00:08:10,810 --> 00:08:13,840
然后测试动画

149
00:08:13,840 --> 00:08:16,190
它仍然可以完美地工作。

150
00:08:16,190 --> 00:08:18,710
所以这非常灵活

151
00:08:18,710 --> 00:08:21,740
我们稍后可以用实际数据替换。

152
00:08:21,740 --> 00:08:23,100
所以我希望你玩得开心。

153
00:08:23,100 --> 00:08:24,820
在下一次课程中，我想向您展示

154
00:08:24,820 --> 00:08:26,910
如何创建背景模糊，

155
00:08:26,910 --> 00:08:28,540
我们将调整用户界面

156
00:08:28,540 --> 00:08:33,110
适合iPad和macOS，以及导航方式，

157
00:08:33,110 --> 00:08:35,103
下次见。

